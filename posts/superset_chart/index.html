<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#faf6f1 lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Superset 实践及踩坑记录 -</title><meta name=theme-color><meta name=description content="Superset 怎么用 整体布局 首先整体的布局分为 Databases、Datasets、Charts、Dashboards 等几个部分。 Databases Select a database to connect
填写需要连接的数据库，数据库连接配置信息可以参考官方文档填写。 Datasets Add dataset
添加连接的数据库中的具体的表，数据库连接成功后下拉即可点击选择需要的表。 Charts Create a new chart
从 Datasets 中选择一张需要可视化的表。 根据实际的需求选择图表的类型，配置详细的展示信息。例如绘制地图类型的图表，展现不同省份的下单次数。 踩坑问题： 这里就出现了一个非常坑的地方，绘制地图所用的表提供了两种编码用于标识省份，iso_code和iso_code_3166_2，用哪个都可以。 但在 Superset 中选择第一种编码则只能显示港澳台地区的数据，其他地区无法显示；而选择第二种编码则港澳台地区无法显示，其他地区可以显示。一番搜索发现是 Superset 在港澳台和其他地区提供的编码方式不一致导致的问题。
解决方法： 按照解决方法，进入 Superset 的安装目录下的目录。
/lib/python3.8/site-packages/superset/static/assets/ 找到对应的地图文件，.geojson 文件有很多，过滤找出文件，
grep -rl 'Beijing'
并修改，将编码方式修改一致即可。 Dashboards 编辑布局，添加图表即可完成 Dashboard 绘制。 也可以对 Dashboards 进行刷新，根据需要设置REFRESH FREQUENCY。 参考链接 article_124559112"><meta name=author content><link rel="preload stylesheet" as=style href=https://kevzhang.top/main.min.css><link rel=preload as=image href=https://kevzhang.top/theme.png><link rel=preload as=image href="https://www.gravatar.com/avatar/6fd8df4abe41f17fd8e2dd7d97b5cc8c?s=160&d=identicon"><link rel=preload as=image href=https://kevzhang.top/github.svg><link rel=icon href=https://kevzhang.top/favicon.ico><link rel=apple-touch-icon href=https://kevzhang.top/apple-touch-icon.png><meta name=generator content="Hugo 0.104.3"><meta property="og:title" content="Superset 实践及踩坑记录"><meta property="og:description" content="从美观程度来说我更喜欢 ECharts，下次换 Echarts。"><meta property="og:type" content="article"><meta property="og:url" content="https://kevzhang.top/posts/superset_chart/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-16T19:05:56+08:00"><meta property="article:modified_time" content="2022-10-16T19:05:56+08:00"><meta itemprop=name content="Superset 实践及踩坑记录"><meta itemprop=description content="从美观程度来说我更喜欢 ECharts，下次换 Echarts。"><meta itemprop=datePublished content="2022-10-16T19:05:56+08:00"><meta itemprop=dateModified content="2022-10-16T19:05:56+08:00"><meta itemprop=wordCount content="54"><meta itemprop=keywords content="Superset,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Superset 实践及踩坑记录"><meta name=twitter:description content="从美观程度来说我更喜欢 ECharts，下次换 Echarts。"></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold" href=https://kevzhang.top/></a>
<a class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"></a></div><a class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"></a>
<script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#faf6f1"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"><a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/kevcode1 target=_blank></a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"><article><header class=mb-20><h1 class="!my-0 pb-2.5">Superset 实践及踩坑记录</h1><div class="text-sm opacity-60"><time>Oct 16, 2022</time></div></header><section><h2 id=superset-怎么用>Superset 怎么用</h2><h3 id=整体布局>整体布局</h3><ul><li>首先整体的布局分为 Databases、Datasets、Charts、Dashboards 等几个部分。</li></ul><p><img src=/superset_chart/home.png alt></p><h3 id=databases>Databases</h3><ul><li><code>Select a database to connect</code><br>填写需要连接的数据库，数据库连接配置信息可以参考<a href=https://superset.apache.org/docs/databases/installing-database-drivers/>官方文档</a>填写。</li></ul><p><img src=/superset_chart/database.png alt></p><h3 id=datasets>Datasets</h3><ul><li><code>Add dataset</code><br>添加连接的数据库中的具体的表，数据库连接成功后下拉即可点击选择需要的表。</li></ul><p><img src=/superset_chart/dataset.png alt></p><h3 id=charts>Charts</h3><ul><li><code>Create a new chart</code><br>从 Datasets 中选择一张需要可视化的表。</li></ul><p><img src=/superset_chart/chart.png alt></p><ul><li>根据实际的需求选择图表的类型，配置详细的展示信息。例如绘制地图类型的图表，展现不同省份的下单次数。</li></ul><p><img src=/superset_chart/map.png alt></p><ul><li><strong>踩坑问题</strong>：
这里就出现了一个非常坑的地方，绘制地图所用的表提供了两种编码用于标识省份，<code>iso_code</code>和<code>iso_code_3166_2</code>，用哪个都可以。</li></ul><p><img src=/superset_chart/table.png alt></p><p>但在 Superset 中选择第一种编码则只能显示港澳台地区的数据，其他地区无法显示；而选择第二种编码则港澳台地区无法显示，其他地区可以显示。一番搜索发现是 Superset 在港澳台和其他地区提供的编码方式不一致导致的问题。</p><ul><li><strong>解决方法</strong>：<ul><li>按照<a href=https://blog.csdn.net/csncd/article/details/124559112>解决方法</a>，进入 Superset 的安装目录下的目录。<br><code>/lib/python3.8/site-packages/superset/static/assets/</code></li><li>找到对应的地图文件，<code>.geojson</code> 文件有很多，过滤找出文件，<br><code>grep -rl 'Beijing'</code><br>并修改，将编码方式修改一致即可。</li></ul></li></ul><h3 id=dashboards>Dashboards</h3><ul><li>编辑布局，添加图表即可完成 Dashboard 绘制。</li><li>也可以对 Dashboards 进行刷新，根据需要设置<code>REFRESH FREQUENCY</code>。</li></ul><p><img src=/superset_chart/dashboard.png alt></p><h2 id=参考链接>参考链接</h2><p><a href=https://blog.csdn.net/csncd/article/details/124559112>article_124559112</a></p></section><footer class="mt-12 flex flex-wrap"><a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://kevzhang.top/tags/superset>Superset</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="ml-auto flex w-1/2 items-center justify-end p-6 pl-3 no-underline" href=https://kevzhang.top/posts/superset/><span>Superset 配置环境</span><span class=ml-1.5>→</span></a></nav></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2022
<a class=link href=https://kevzhang.top/></a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>▷ Paper 6</a></footer></body></html>